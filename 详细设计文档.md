**三角函数计算器详细设计文档**

**1**** 模块基本信息**

#### UI界面模块

UI模块是一个用户操作界面，包含数值按钮，三角函数运算按钮，功能按钮，以及数字显示框。

其中数值按钮包含0-9的数字按钮和小数点按钮；三角函数按钮包含了sin、cos、arcsin和arctan四个函数计算按钮；功能按钮包含了模式选择、清零、符号切换以及删除按钮；数字显示框用于显示用户输入的数字，以及显示计算后的结果。

#### 三角函数计算模块：

![image-20220331192416220](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192416220.png)

图 1 顶层模块图

三角函数计算模块，主要实现四个三角函数的计算功能，用户通过UI界面输入数字并且选择相应的三角函数调用本模块的功能，从而进行相应的三角函数计算

![image-20220331192438013](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192438013.png)

图 2 UI界面模块

![image-20220331192458399](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192458399.png)

图 3 三角函数计算模块

**2**** 功能概述**

用户通过UI界面通过点击数字按钮以及符号按钮输入数字，通过数值显示界面进行显示，并且通过点击来选择模式（分为弧度模式和角度模式）以及要进行计算的函数，当用户点击所要进行计算的函数的同时，UI界面将用户输入的数字（初始值为0），以及选择的函数传输给三角函数计算模块。

三角函数计算模块获得UI界面模块传输过来用户所选择的函数后，调用相应的函数。函数调用后，从三角函数计算模块中获取由UI界面传输过来的用户输入的数字以及模式，进行计算。

完成计算后，向三角函数计算模块返回计算的值，再由三角函数计算模块，向UI界面模块返回计算的值，UI界面模块收到三角函数计算模块计算完成后的值后，将其显示在数值显示界面。

**3**** 算法**

程序算法实现采用泰勒级数展开的方法实现，对sin、cos、arcsin、arctan计算逼近函数值，四个三角函数对应的泰勒级数展开式如下：
$$
sin(x)=x-x^3/3!+x^5/5!-x^7/7!+⋯
$$

$$
cos(x)=1-x^2/2!+x^4/4!-x^6/6!+⋯
$$

$$
arcsin(x)=x+1/2×x^3/3+(1×3)/(2×4)×x^5/5+(1×3×5)/(2×4×6)×x^7/7+⋯
$$

$$
arctan(x)=x-x^3/3+x^5/5-x^7/7+⋯
$$



其中在对arcsin函数进行计算之前，需判断输入的值是否合理，如果不合理，返回值为error，如果合理再进行下一步的计算。计算完成后通过round函数对数值保留一定的精度后在返回。

**4**** 模块处理逻辑**

**UI**** 用户操作界面流程图：![image-20220331192515097](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192515097.png)

图4 UI用户操作界面流程

#### 函数计算流程图：

![image-20220331192529092](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192529092.png)

图5 函数计算流程

#### 计算结果显示流程图：

![image-20220331192536713](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192536713.png)

图6 计算结果显示流程

### 5接口

#### 用户接口

主界面：运行main.py文件后进入主界面，该界面提供根据用户输入的数值仔显示框中提供sin、cos、arcsin和arctan四类三角函数及反三角函数的计算值，并且能根据用户需求实现清空和删除功能。

#### 软件接口

Pycharm Community Edition

#### 用户接口数据描述

显示框：显示用户输入的数值及函数计算结果值

函数运算：支持 **sin** 、 **cos** 、 **arcsin** 及 **arctan** 四类函数

数值：包括 **0-9** 共9个阿拉伯数字

数字属性：包括表示数值正负的&quot; **+/-**&quot;及表示小数点的&quot; **.**&quot;

归零删除：包括归零操作 **c** 及逐位删除操作 **del**

模式切换 **mode** ：包括按sin，cos，arctan及arcsin的顺序切换函数

### 6性能

表1数据精度

| 字段 | 类型 | 备注 |
| --- | --- | --- |
| Sin/cos输入 | Float/int型 | 输入为角度值degree，支持3位小数精度 |
| Sin/cos输出 | Float型 | 支持3位小数精度 |
| Arcsin输入 | Float/int型 | 输入范围[-1 , 1]，否则将显示&quot;无效输入&quot; |
| Arcsin输出 | Float型 | 输出为角度值degree，支持1位小数精度 |
| Arctan输入 | Float/int型 | 支持3位小数精度 |
| Arctan输出 | Float型 | 输出为角度值degree，支持2位小数精度 |

#### 时间特性：

1.响应时间：用户任意操作后系统在0.01秒内给予反馈信息。

2.更新处理时间：由系统运行状态来决定。

3.函数计算时间：能够在0.1秒内完成。

#### 灵活性：

理论上支持小数点后多位输入数据的运算，且支持正负数及小数，支持输入数字的单个顺序删除及清空功能。

### 7测试计划

使用python单元测试库函数assertEqual( )。如果两个输入值相等，则assertEqual( )将返回true，否则返回false。

#### 测试arcsin/arctan函数

如图所示，以arcsin为例，定义测试函数test\_arcsin，输入为[-1 , 1]范围内的4个正数和4个负数及0。调用写好的asin( )函数与由计算器算出的正确数值比较。

![image-20220331192547812](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192547812.png)

图7 测试arcsin函数部分代码截图

#### 测试sin/cos函数

如图所示，以sin为例，定义测试函数test\_sin，输入为 ![](RackMultipart20220331-4-amk7ux_html_c9b9e1cf481a6734.gif)范围内的7个正角度和7个负角度及0，调用写好的sin( )函数与由计算器算出的正确数值比较。

![image-20220331192602162](https://gitee.com/aaalds/aaalds_note/raw/master/image-20220331192602162.png)

图8 测试sin函数部分代码截图

#### 测试结果

4个测试函数在0.5s内完成运行，且全部通过。

